<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="css/main.css" />
    <link
      rel="icon"
      href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.97em%22 font-size=%2280%22>ðŸ’ </text></svg>"
    />

    <script src="wasm_exec.js"></script>

    <script>
      async function createEmulatorFrame() {
        removeEmulatorFrame();
        const pgmName = document.querySelector("#program").value;
        var emuFrame = document.createElement("iframe");
        emuFrame.src = "emulator.html";
        emuFrame.id = "emulator";
        emuFrame.setAttribute("data-pgm-name", "roms/" + pgmName);
        emuFrame.setAttribute("data-delay", 1);
        emuFrame.width = 1000;
        emuFrame.height = 500;
        document.body.appendChild(emuFrame);
      }

      function removeEmulatorFrame() {
        oldFrame = document.querySelector("#emulator");
        if (oldFrame) {
          document.body.removeChild(oldFrame);
        }
      }
    </script>
    <title>CHIP-8 ~ Go & WASM</title>
  </head>
  <body>
    <select id="program">
      <option>bc1.ch8</option>
      <option>ibm.ch8</option>
      <option>test-opcode.ch8</option>
      <option>chip8-test-rom.ch8</option>
    </select>
    <button onclick="createEmulatorFrame()">LOAD PROGRAM</button>
    <button onclick="removeEmulatorFrame()">HALT SYSTEM</button>
    <footer>
      CHIP-8 Emulator in Go, Ben Coleman<br /><a
        href="https://github.com/benc-uk/chip8"
        >GitHub Project</a
      >
    </footer>
  </body>
</html>
